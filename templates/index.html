<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tu Asistente Saludable con IA â€“ NutriAventura</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

</head>
<body>
    <div class="inicio">
        <img src="/static/logo_nutresa.png" alt="Nutresa" class="logo">
        <h1>ğŸŒ¿ Bienvenido a <span class="resaltado">NutriAventura</span></h1>
        <p>
            Descubre tu camino hacia una vida mÃ¡s saludable con apoyo de la IA.<br>
            Gana puntos, completa misiones y mejora tu equilibrio diario ğŸ
        </p>

        <div class="botones">
            <a href="/chat" class="btn-chat">ğŸ’¬ Ir al Chat Saludable</a>
            <a href="{{ url_for('progreso') }}" class="btn-progreso">ğŸ“Š Ver mi progreso</a>
            <a href="#" onclick="mostrarFormulario()" class="btn-personalizar">âš™ï¸ Personalizar Perfil</a>
            <a href="/productos" class="btn-productos">ğŸ¥— Productos Saludables</a>

        </div>

        <div id="formulario" class="oculto">
            <h2>ğŸ§ Personaliza tu experiencia</h2>
            <label>Edad:</label>
            <input type="number" id="edad" placeholder="Ej. 25">
            <label>Actividad fÃ­sica:</label>
            <select id="actividad">
                <option value="baja">Baja</option>
                <option value="media">Media</option>
                <option value="alta">Alta</option>
            </select>
            <label>Preferencia alimentaria:</label>
            <select id="preferencia">
                <option value="omnivoro">OmnÃ­voro</option>
                <option value="vegetariano">Vegetariano</option>
                <option value="vegano">Vegano</option>
            </select>
            <button onclick="enviarDatos()">Guardar perfil âœ…</button>
            <p id="respuesta"></p>
        </div>
    </div>

    <script>
        function mostrarFormulario() {
            document.getElementById("formulario").classList.toggle("oculto");
        }

        async function enviarDatos() {
            const edad = document.getElementById("edad").value;
            const actividad = document.getElementById("actividad").value;
            const preferencia = document.getElementById("preferencia").value;

            const respuesta = await fetch("/personalizar", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ edad, actividad, preferencia })
            });

            const data = await respuesta.json();
            document.getElementById("respuesta").innerHTML =
                `ğŸŒˆ Aura: <b>${data.aura}</b><br>ğŸ’¬ ${data.mensaje}<br>ğŸ… Nivel: ${data.progreso.nivel}`;
        }
    </script>
</body>
</html>
